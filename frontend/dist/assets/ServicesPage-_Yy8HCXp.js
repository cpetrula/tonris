import{d as M,i as v,E as V,j as q,z as j,c as F,a as t,e as i,u as a,g as p,w as r,s as g,o as k,t as u,q as w,f as $,n as H,I as h,S as T,k as G,l as O,m as Q}from"./index-Gs8EthlX.js";import{a as J,b as K}from"./index-Ck1sxs7k.js";import{s as R,a as f,b as _}from"./index-D3hXdzxh.js";import{s as W}from"./index-CaUvzTAf.js";import{s as X}from"./index-DZoqFwy1.js";import"./index-C-5KtboR.js";import"./index-QPNBdbY6.js";const Y={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},Z={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6"},ee={class:"text-center"},te={class:"text-3xl font-bold text-violet-600"},se={class:"text-center"},le={class:"text-3xl font-bold text-green-600"},ae={class:"text-center"},ie={class:"text-3xl font-bold text-cyan-600"},oe={class:"font-medium text-white-900"},re={class:"text-sm text-white-500 line-clamp-1"},ne={class:"px-2 py-1 bg-gray-100 rounded-full text-sm text-gray-700"},ue={class:"text-white-700"},de={class:"font-medium text-white-900"},ce={class:"flex gap-2"},ve={class:"space-y-4"},me={class:"grid grid-cols-2 gap-4"},Se=M({__name:"ServicesPage",setup(pe){const b=v(!1),n=v([]),y=v(""),m=v(!1),x=v(!1),c=v(""),S={id:"",name:"",description:"",duration:30,price:0,category:"",status:"active"},o=v({...S}),D=V(()=>{if(!y.value)return n.value;const l=y.value.toLowerCase();return n.value.filter(e=>e.name.toLowerCase().includes(l)||e.description.toLowerCase().includes(l)||e.category.toLowerCase().includes(l))}),U=V(()=>{const l=new Set(n.value.map(e=>e.category));return Array.from(l)});function A(l){if(l<60)return`${l} min`;const e=Math.floor(l/60),d=l%60;return d>0?`${e}h ${d}m`:`${e}h`}function E(l){return`$${l.toFixed(2)}`}function P(){o.value={...S,id:crypto.randomUUID()},x.value=!1,m.value=!0,c.value=""}function N(l){o.value={...l},x.value=!0,m.value=!0,c.value=""}function z(){if(!o.value.name||!o.value.price){c.value="Please fill in all required fields";return}if(x.value){const l=n.value.findIndex(e=>e.id===o.value.id);l!==-1&&(n.value[l]={...o.value})}else n.value.push({...o.value});m.value=!1,c.value=""}function I(l){confirm(`Are you sure you want to delete "${l.name}"?`)&&(n.value=n.value.filter(e=>e.id!==l.id))}function L(l){const e=n.value.findIndex(d=>d.id===l.id);e!==-1&&(n.value[e].status=l.status==="active"?"inactive":"active")}q(async()=>{b.value=!0;try{await B()}catch(l){console.error("Error loading services:",l),c.value="Failed to load services data"}finally{b.value=!1}});async function B(){try{const l=await j.get("/api/services");l.data.success&&l.data.data&&l.data.data.services&&(n.value=l.data.data.services.map(e=>({id:e.id,name:e.name||"",description:e.description||"",duration:e.duration||30,price:e.price||0,category:e.category||"",status:e.status||"active"})))}catch(l){console.error("Error fetching services:",l)}}return(l,e)=>{const d=T("tooltip");return k(),F("div",null,[t("div",Y,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Services"),t("p",{class:"text-gray-600 mt-1"},"Manage your service offerings and pricing")],-1)),i(a(p),{label:"Add Service",icon:"pi pi-plus",class:"mt-4 sm:mt-0",onClick:P})]),t("div",Z,[i(a(g),{class:"shadow-sm"},{content:r(()=>[t("div",ee,[t("p",te,u(n.value.length),1),e[9]||(e[9]=t("p",{class:"text-sm text-white-500"},"Total Services",-1))])]),_:1}),i(a(g),{class:"shadow-sm"},{content:r(()=>[t("div",se,[t("p",le,u(n.value.filter(s=>s.status==="active").length),1),e[10]||(e[10]=t("p",{class:"text-sm text-white-500"},"Active Services",-1))])]),_:1}),i(a(g),{class:"shadow-sm"},{content:r(()=>[t("div",ae,[t("p",ie,u(U.value.length),1),e[11]||(e[11]=t("p",{class:"text-sm text-white-500"},"Categories",-1))])]),_:1})]),i(a(g),{class:"mb-6 shadow-sm"},{content:r(()=>[i(a(J),null,{default:r(()=>[i(a(K),{class:"pi pi-search"}),i(a(w),{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=s=>y.value=s),placeholder:"Search services...",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),i(a(g),{class:"shadow-sm"},{content:r(()=>[i(a(R),{value:D.value,loading:b.value,paginator:"",rows:10,rowsPerPageOptions:[5,10,20],responsiveLayout:"scroll",class:"p-datatable-sm"},{empty:r(()=>[...e[12]||(e[12]=[t("div",{class:"text-center py-8 text-gray-500"}," No services found ",-1)])]),default:r(()=>[i(a(f),{field:"name",header:"Service",sortable:""},{body:r(({data:s})=>[t("div",null,[t("p",oe,u(s.name),1),t("p",re,u(s.description),1)])]),_:1}),i(a(f),{field:"category",header:"Category",sortable:""},{body:r(({data:s})=>[t("span",ne,u(s.category),1)]),_:1}),i(a(f),{field:"duration",header:"Duration",sortable:""},{body:r(({data:s})=>[t("span",ue,[e[13]||(e[13]=t("i",{class:"pi pi-clock mr-1 text-white-400"},null,-1)),$(" "+u(A(s.duration)),1)])]),_:1}),i(a(f),{field:"price",header:"Price",sortable:""},{body:r(({data:s})=>[t("span",de,u(E(s.price)),1)]),_:1}),i(a(f),{field:"status",header:"Status",sortable:""},{body:r(({data:s})=>[t("span",{class:H(["px-2 py-1 rounded-full text-xs font-medium",s.status==="active"?"bg-green-100 text-green-700":"bg-white-100 text-white-700"])},u(s.status==="active"?"Active":"Inactive"),3)]),_:1}),i(a(f),{header:"Actions",exportable:!1,style:{"min-width":"10rem"}},{body:r(({data:s})=>[t("div",ce,[h(i(a(p),{icon:"pi pi-pencil",text:"",size:"small",severity:"secondary",onClick:C=>N(s)},null,8,["onClick"]),[[d,"Edit",void 0,{top:!0}]]),h(i(a(p),{icon:s.status==="active"?"pi pi-ban":"pi pi-check",text:"",size:"small",severity:s.status==="active"?"warn":"success",onClick:C=>L(s)},null,8,["icon","severity","onClick"]),[[d,s.status==="active"?"Deactivate":"Activate",void 0,{top:!0}]]),h(i(a(p),{icon:"pi pi-trash",text:"",size:"small",severity:"danger",onClick:C=>I(s)},null,8,["onClick"]),[[d,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading"])]),_:1}),i(a(X),{visible:m.value,"onUpdate:visible":e[7]||(e[7]=s=>m.value=s),header:x.value?"Edit Service":"Add Service",modal:!0,style:{width:"500px"}},{footer:r(()=>[i(a(p),{label:"Cancel",text:"",severity:"secondary",onClick:e[6]||(e[6]=s=>m.value=!1)}),i(a(p),{label:x.value?"Update":"Create",onClick:z},null,8,["label"])]),default:r(()=>[c.value?(k(),G(a(Q),{key:0,severity:"error",class:"mb-4"},{default:r(()=>[$(u(c.value),1)]),_:1})):O("",!0),t("div",ve,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-white-700 mb-1"},"Service Name *",-1)),i(a(w),{modelValue:o.value.name,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.name=s),class:"w-full",placeholder:"e.g., Haircut"},null,8,["modelValue"])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-white-700 mb-1"},"Description",-1)),i(a(W),{modelValue:o.value.description,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.description=s),class:"w-full",rows:"3",placeholder:"Describe the service..."},null,8,["modelValue"])]),t("div",me,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-white-700 mb-1"},"Duration (minutes) *",-1)),i(a(_),{modelValue:o.value.duration,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.duration=s),class:"w-full",min:5,step:5,suffix:" min"},null,8,["modelValue"])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-white-700 mb-1"},"Price *",-1)),i(a(_),{modelValue:o.value.price,"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.price=s),class:"w-full",mode:"currency",currency:"USD",locale:"en-US"},null,8,["modelValue"])])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-white-700 mb-1"},"Category",-1)),i(a(w),{modelValue:o.value.category,"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.category=s),class:"w-full",placeholder:"e.g., Hair, Grooming, Spa"},null,8,["modelValue"])])])]),_:1},8,["visible","header"])])}}});export{Se as default};
