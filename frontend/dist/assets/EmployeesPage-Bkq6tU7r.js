import{d as I,i as d,E as j,j as F,z as q,c as k,a as t,e as o,u as a,g as m,w as n,s as A,o as g,q as x,t as u,n as M,I as C,S as R,k as T,l as _,f as Q,m as G,F as H,r as J}from"./index-B-G2JxpE.js";import{s as K,a as w}from"./index-ly289oks.js";import{s as D}from"./index-7YYmBiKh.js";import"./index-BDF_HIOt.js";import"./index-Pi2SzzZU.js";import"./index-DDIe16w6.js";const W={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},X={class:"flex flex-col sm:flex-row gap-4"},Y={class:"flex-1"},Z={class:"p-input-icon-left w-full"},ee={class:"flex items-center"},le={class:"w-10 h-10 bg-violet-100 rounded-full flex items-center justify-center mr-3"},te={class:"text-violet-600 font-medium"},se={class:"font-medium text-gray-900"},ae={class:"text-sm text-gray-500"},oe={class:"px-2 py-1 bg-gray-100 rounded-full text-sm text-gray-700"},ie={class:"flex gap-2"},ne={class:"space-y-4"},re={class:"grid grid-cols-2 gap-4"},ue={key:0,class:"space-y-3"},de={class:"font-medium text-gray-700 capitalize"},be=I({__name:"EmployeesPage",setup(me){const V=d(!1),r=d([]),h=d(""),p=d(!1),b=d(!1),N=d(!1),v=d(null),f=d(""),E={id:"",firstName:"",lastName:"",email:"",phone:"",role:"",status:"active",schedule:{monday:"9:00 AM - 5:00 PM",tuesday:"9:00 AM - 5:00 PM",wednesday:"9:00 AM - 5:00 PM",thursday:"9:00 AM - 5:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"Off",sunday:"Off"}},i=d({...E}),O=j(()=>{if(!h.value)return r.value;const s=h.value.toLowerCase();return r.value.filter(e=>e.firstName.toLowerCase().includes(s)||e.lastName.toLowerCase().includes(s)||e.email.toLowerCase().includes(s)||e.role.toLowerCase().includes(s))});function P(){i.value={...E,id:crypto.randomUUID()},b.value=!1,p.value=!0,f.value=""}function $(s){i.value={...s},b.value=!0,p.value=!0,f.value=""}function S(s){v.value=s,N.value=!0}function U(){if(!i.value.firstName||!i.value.lastName||!i.value.email){f.value="Please fill in all required fields";return}if(b.value){const s=r.value.findIndex(e=>e.id===i.value.id);s!==-1&&(r.value[s]={...i.value})}else r.value.push({...i.value});p.value=!1,f.value=""}function L(s){confirm(`Are you sure you want to delete ${s.firstName} ${s.lastName}?`)&&(r.value=r.value.filter(e=>e.id!==s.id))}function z(s){const e=r.value.findIndex(y=>y.id===s.id);e!==-1&&(r.value[e].status=s.status==="active"?"inactive":"active")}F(async()=>{V.value=!0;try{await B()}catch(s){console.error("Error loading employees:",s),f.value="Failed to load employees data"}finally{V.value=!1}});async function B(){try{const s=await q.get("/api/employees");s.data.success&&s.data.data&&s.data.data.employees&&(r.value=s.data.data.employees.map(e=>({id:e.id,firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phone:e.phone||"",role:e.employeeType||"",status:e.status||"active",schedule:e.schedule||{monday:"Off",tuesday:"Off",wednesday:"Off",thursday:"Off",friday:"Off",saturday:"Off",sunday:"Off"}})))}catch(s){console.error("Error fetching employees:",s)}}return(s,e)=>{const y=R("tooltip");return g(),k("div",null,[t("div",W,[e[11]||(e[11]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Employees"),t("p",{class:"text-gray-600 mt-1"},"Manage your team members and their schedules")],-1)),o(a(m),{label:"Add Employee",icon:"pi pi-plus",class:"mt-4 sm:mt-0",onClick:P})]),o(a(A),{class:"mb-6 shadow-sm"},{content:n(()=>[t("div",X,[t("div",Y,[t("span",Z,[e[12]||(e[12]=t("i",{class:"pi pi-search"},null,-1)),o(a(x),{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),placeholder:"Search employees...",class:"w-full"},null,8,["modelValue"])])])])]),_:1}),o(a(A),{class:"shadow-sm"},{content:n(()=>[o(a(K),{value:O.value,loading:V.value,paginator:"",rows:10,rowsPerPageOptions:[5,10,20],responsiveLayout:"scroll",class:"p-datatable-sm"},{empty:n(()=>[...e[13]||(e[13]=[t("div",{class:"text-center py-8 text-gray-500"}," No employees found ",-1)])]),default:n(()=>[o(a(w),{field:"firstName",header:"Name",sortable:""},{body:n(({data:l})=>[t("div",ee,[t("div",le,[t("span",te,u(l.firstName.charAt(0))+u(l.lastName.charAt(0)),1)]),t("div",null,[t("p",se,u(l.firstName)+" "+u(l.lastName),1),t("p",ae,u(l.email),1)])])]),_:1}),o(a(w),{field:"phone",header:"Phone",sortable:""}),o(a(w),{field:"role",header:"Role",sortable:""},{body:n(({data:l})=>[t("span",oe,u(l.role),1)]),_:1}),o(a(w),{field:"status",header:"Status",sortable:""},{body:n(({data:l})=>[t("span",{class:M(["px-2 py-1 rounded-full text-xs font-medium",l.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])},u(l.status==="active"?"Active":"Inactive"),3)]),_:1}),o(a(w),{header:"Actions",exportable:!1,style:{"min-width":"12rem"}},{body:n(({data:l})=>[t("div",ie,[C(o(a(m),{icon:"pi pi-calendar",text:"",size:"small",severity:"secondary",onClick:c=>S(l)},null,8,["onClick"]),[[y,"View Schedule",void 0,{top:!0}]]),C(o(a(m),{icon:"pi pi-pencil",text:"",size:"small",severity:"secondary",onClick:c=>$(l)},null,8,["onClick"]),[[y,"Edit",void 0,{top:!0}]]),C(o(a(m),{icon:l.status==="active"?"pi pi-ban":"pi pi-check",text:"",size:"small",severity:l.status==="active"?"warn":"success",onClick:c=>z(l)},null,8,["icon","severity","onClick"]),[[y,l.status==="active"?"Deactivate":"Activate",void 0,{top:!0}]]),C(o(a(m),{icon:"pi pi-trash",text:"",size:"small",severity:"danger",onClick:c=>L(l)},null,8,["onClick"]),[[y,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading"])]),_:1}),o(a(D),{visible:p.value,"onUpdate:visible":e[7]||(e[7]=l=>p.value=l),header:b.value?"Edit Employee":"Add Employee",modal:!0,style:{width:"500px"}},{footer:n(()=>[o(a(m),{label:"Cancel",text:"",severity:"secondary",onClick:e[6]||(e[6]=l=>p.value=!1)}),o(a(m),{label:b.value?"Update":"Create",onClick:U},null,8,["label"])]),default:n(()=>[f.value?(g(),T(a(G),{key:0,severity:"error",class:"mb-4"},{default:n(()=>[Q(u(f.value),1)]),_:1})):_("",!0),t("div",ne,[t("div",re,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"First Name *",-1)),o(a(x),{modelValue:i.value.firstName,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value.firstName=l),class:"w-full"},null,8,["modelValue"])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Name *",-1)),o(a(x),{modelValue:i.value.lastName,"onUpdate:modelValue":e[2]||(e[2]=l=>i.value.lastName=l),class:"w-full"},null,8,["modelValue"])])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email *",-1)),o(a(x),{modelValue:i.value.email,"onUpdate:modelValue":e[3]||(e[3]=l=>i.value.email=l),type:"email",class:"w-full"},null,8,["modelValue"])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Phone",-1)),o(a(x),{modelValue:i.value.phone,"onUpdate:modelValue":e[4]||(e[4]=l=>i.value.phone=l),class:"w-full"},null,8,["modelValue"])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Role",-1)),o(a(x),{modelValue:i.value.role,"onUpdate:modelValue":e[5]||(e[5]=l=>i.value.role=l),class:"w-full",placeholder:"e.g., Stylist, Barber"},null,8,["modelValue"])])])]),_:1},8,["visible","header"]),o(a(D),{visible:N.value,"onUpdate:visible":e[10]||(e[10]=l=>N.value=l),header:`Schedule - ${v.value?.firstName} ${v.value?.lastName}`,modal:!0,style:{width:"500px"}},{footer:n(()=>[o(a(m),{label:"Close",text:"",onClick:e[8]||(e[8]=l=>N.value=!1)}),o(a(m),{label:"Edit Schedule",icon:"pi pi-pencil",onClick:e[9]||(e[9]=l=>$(v.value))})]),default:n(()=>[v.value?(g(),k("div",ue,[(g(!0),k(H,null,J(v.value.schedule,(l,c)=>(g(),k("div",{key:c,class:"flex justify-between items-center py-2 border-b border-gray-100 last:border-0"},[t("span",de,u(c),1),t("span",{class:M(v.value.schedule[c]==="Off"?"text-gray-400":"text-gray-900")},u(v.value.schedule[c]),3)]))),128))])):_("",!0)]),_:1},8,["visible","header"])])}}});export{be as default};
