import{_ as B}from"./logo1-BupRMLVE.js";import{d as N,i as x,j as A,z as D,c as p,l as v,k,w as h,u as s,m as T,o as c,a as e,e as l,g as y,t as r,x as S,h as M,R as $,F as j,r as E,n as C,a$ as L,a_ as P,f as F}from"./index-DNK_niXm.js";import{u as O}from"./tenant-DsPnYV3K.js";const V={key:0,class:"mb-4"},z={class:"flex items-center justify-between w-full"},U={class:"flex items-center justify-between w-full"},Y={class:"flex items-center gap-3"},W={class:"font-bold text-lg"},H=N({__name:"InactiveAccountBanner",setup(I){const d=S(),i=x(!1),a=x(null),o=x(0);A(async()=>{try{const u=await D.get("/api/billing/subscription");if(a.value=u.data.data.subscription,a.value&&a.value.status==="inactive")i.value=!0;else if(a.value&&a.value.status==="trialing"&&a.value.trialEnd){const n=new Date(a.value.trialEnd),_=new Date,f=Math.ceil((n.getTime()-_.getTime())/(1e3*60*60*24));f<=5&&f>0&&(o.value=f,i.value=!0)}}catch(u){console.error("Failed to fetch subscription status:",u)}});function m(){d.push("/app/billing")}return(u,n)=>i.value?(c(),p("div",V,[a.value?.status==="inactive"?(c(),k(s(T),{key:0,severity:"error",closable:!1,class:"shadow-md"},{default:h(()=>[e("div",z,[n[0]||(n[0]=e("div",{class:"flex items-center gap-3"},[e("i",{class:"pi pi-exclamation-circle text-2xl"}),e("div",null,[e("p",{class:"font-bold text-lg"},"Your Free Trial Has Ended"),e("p",{class:"mt-1"}," To continue using CRITON.AI and keep your AI receptionist active, please set up your payment method. ")])],-1)),l(s(y),{label:"Set Up Payment",icon:"pi pi-credit-card",severity:"contrast",onClick:m})])]),_:1})):a.value?.status==="trialing"&&o.value>0?(c(),k(s(T),{key:1,severity:"warn",closable:!1,class:"shadow-md"},{default:h(()=>[e("div",U,[e("div",Y,[n[2]||(n[2]=e("i",{class:"pi pi-info-circle text-2xl"},null,-1)),e("div",null,[e("p",W,r(o.value)+" Day"+r(o.value>1?"s":"")+" Left in Your Free Trial ",1),n[1]||(n[1]=e("p",{class:"mt-1"}," Add your payment method now to ensure uninterrupted service after your trial ends. ",-1))])]),l(s(y),{label:"Add Payment Method",icon:"pi pi-credit-card",severity:"warning",onClick:m})])]),_:1})):v("",!0)])):v("",!0)}}),q={class:"min-h-screen flex bg-gray-100"},G={class:"h-16 flex items-center justify-center border-b border-gray-200 px-4"},J={class:"mt-6 px-4"},K={class:"space-y-2"},Q={key:0,class:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200"},X={class:"text-sm font-medium text-gray-900"},Z={class:"flex-1 flex flex-col min-w-0"},ee={class:"h-16 bg-white shadow-sm border-b border-gray-200 flex items-center justify-between px-4 lg:px-6"},te={class:"flex-1 px-4"},se={key:0,class:"flex items-center space-x-2"},ae={class:"text-sm font-semibold text-violet-600 dark:text-violet-400"},ie={class:"flex items-center space-x-4"},ne={class:"relative"},oe={class:"w-8 h-8 bg-violet-600 rounded-full flex items-center justify-center text-white font-medium"},le={class:"hidden md:block text-gray-700"},re={class:"flex-1 overflow-y-auto p-4 lg:p-6"},de=N({__name:"DashboardLayout",setup(I){const d=S(),i=M(),a=O(),o=x(!1),m=x(),u=[{label:"Profile",icon:"pi pi-user",command:()=>d.push("/app/profile")},{label:"Settings",icon:"pi pi-cog",command:()=>d.push("/app/settings")},{separator:!0},{label:"Sign Out",icon:"pi pi-sign-out",command:()=>f()}],n=[{name:"Dashboard",path:"/app",icon:"pi pi-home"},{name:"Appointments",path:"/app/appointments",icon:"pi pi-calendar"},{name:"Employees",path:"/app/employees",icon:"pi pi-users"},{name:"Services",path:"/app/services",icon:"pi pi-list"},{name:"Reports",path:"/app/reports",icon:"pi pi-chart-line"},{name:"Billing",path:"/app/billing",icon:"pi pi-credit-card"},{name:"Settings",path:"/app/settings",icon:"pi pi-cog"}];function _(g){m.value.toggle(g)}async function f(){await i.logout(),a.clearTenant(),d.push("/login")}function w(){o.value=!o.value}function R(g){const t=g.replace(/\D/g,"");return t.length===11&&t.startsWith("1")?`+1 (${t.slice(1,4)}) ${t.slice(4,7)}-${t.slice(7)}`:t.length===10?`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:g}return A(async()=>{!i.user&&i.token&&await i.fetchUser(),await a.fetchTenants()}),(g,t)=>(c(),p("div",q,[o.value?(c(),p("div",{key:0,class:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:w})):v("",!0),e("aside",{class:C(["fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-200 ease-in-out lg:translate-x-0 lg:static lg:inset-0",o.value?"translate-x-0":"-translate-x-full"])},[e("div",G,[l(s($),{to:"/app",class:"flex items-center space-x-2"},{default:h(()=>[...t[0]||(t[0]=[e("img",{src:B,alt:"CRITON.AI",class:"h-8 w-auto"},null,-1),e("div",{class:"flex flex-col"},[e("span",{class:"text-base font-bold text-gray-900 tracking-tight"},"CRITON.AI"),e("span",{class:"text-[10px] text-gray-500 tracking-wider"},"Smart Assistants")],-1)])]),_:1})]),e("nav",J,[e("div",K,[(c(),p(j,null,E(n,b=>l(s($),{key:b.path,to:b.path,class:"flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-violet-50 hover:text-violet-600 transition-colors","active-class":"bg-violet-50 text-violet-600"},{default:h(()=>[e("i",{class:C([b.icon,"mr-3"])},null,2),F(" "+r(b.name),1)]),_:2},1032,["to"])),64))])]),s(a).currentTenant?(c(),p("div",Q,[t[1]||(t[1]=e("div",{class:"text-xs text-gray-500 uppercase tracking-wide mb-1"},"Current Workspace",-1)),e("div",X,r(s(a).tenantName),1)])):v("",!0)],2),e("div",Z,[e("header",ee,[l(s(y),{icon:"pi pi-bars",text:"",class:"lg:hidden",onClick:w,"aria-label":"Toggle menu"}),e("div",te,[s(a).currentTenant?.twilioPhoneNumber?(c(),p("div",se,[t[2]||(t[2]=e("i",{class:"pi pi-phone text-violet-600"},null,-1)),t[3]||(t[3]=e("span",{class:"text-sm font-medium text-surface-700 dark:text-surface-300 text-violet-600"}," Your AI phone #: ",-1)),e("span",ae,r(R(s(a).currentTenant.twilioPhoneNumber)),1)])):v("",!0)]),e("div",ie,[e("div",ne,[l(s(y),{text:"",class:"flex items-center space-x-2",onClick:_},{default:h(()=>[e("div",oe,r(s(i).user?.firstName?.charAt(0)||"U"),1),e("span",le,r(s(i).user?.firstName||"")+" "+r(s(i).user?.lastName||""),1),t[4]||(t[4]=e("i",{class:"pi pi-chevron-down text-gray-500"},null,-1))]),_:1}),l(s(L),{ref_key:"userMenu",ref:m,model:u,popup:""},null,512)])])]),e("main",re,[l(H),l(s(P))])])]))}});export{de as default};
