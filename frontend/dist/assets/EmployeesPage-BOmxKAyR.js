import{d as I,i as d,E as j,j as F,z as q,c as k,a as s,e as o,u as a,g as m,w as u,s as A,o as g,q as b,t as r,n as M,I as C,S as R,k as T,l as D,f as Q,m as G,F as H,r as J}from"./index-DNK_niXm.js";import{a as K,b as W}from"./index-x2WoAOt1.js";import{s as X,a as h}from"./index-BHrv5IYx.js";import{s as O}from"./index-D__wYcfV.js";import"./index-CzOnWBWI.js";import"./index-BeC7eAcH.js";const Y={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},Z={class:"flex items-center"},ee={class:"w-10 h-10 bg-violet-100 rounded-full flex items-center justify-center mr-3"},le={class:"text-violet-600 font-medium"},te={class:"font-medium text-white-900"},se={class:"text-sm text-white-600"},ae={class:"px-2 py-1 bg-gray-100 rounded-full text-sm text-gray-700"},oe={class:"flex gap-2"},ie={class:"space-y-4"},ue={class:"grid grid-cols-2 gap-4"},ne={key:0,class:"space-y-3"},re={class:"font-medium text-gray-700 capitalize"},be=I({__name:"EmployeesPage",setup(de){const V=d(!1),n=d([]),w=d(""),p=d(!1),x=d(!1),N=d(!1),v=d(null),f=d(""),E={id:"",firstName:"",lastName:"",email:"",phone:"",role:"",status:"active",schedule:{monday:"9:00 AM - 5:00 PM",tuesday:"9:00 AM - 5:00 PM",wednesday:"9:00 AM - 5:00 PM",thursday:"9:00 AM - 5:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"Off",sunday:"Off"}},i=d({...E}),P=j(()=>{if(!w.value)return n.value;const t=w.value.toLowerCase();return n.value.filter(e=>e.firstName.toLowerCase().includes(t)||e.lastName.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.role.toLowerCase().includes(t))});function S(){i.value={...E,id:crypto.randomUUID()},x.value=!1,p.value=!0,f.value=""}function $(t){i.value={...t},x.value=!0,p.value=!0,f.value=""}function U(t){v.value=t,N.value=!0}function _(){if(!i.value.firstName||!i.value.lastName||!i.value.email){f.value="Please fill in all required fields";return}if(x.value){const t=n.value.findIndex(e=>e.id===i.value.id);t!==-1&&(n.value[t]={...i.value})}else n.value.push({...i.value});p.value=!1,f.value=""}function L(t){confirm(`Are you sure you want to delete ${t.firstName} ${t.lastName}?`)&&(n.value=n.value.filter(e=>e.id!==t.id))}function z(t){const e=n.value.findIndex(y=>y.id===t.id);e!==-1&&(n.value[e].status=t.status==="active"?"inactive":"active")}F(async()=>{V.value=!0;try{await B()}catch(t){console.error("Error loading employees:",t),f.value="Failed to load employees data"}finally{V.value=!1}});async function B(){try{const t=await q.get("/api/employees");t.data.success&&t.data.data&&t.data.data.employees&&(n.value=t.data.data.employees.map(e=>({id:e.id,firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phone:e.phone||"",role:e.employeeType||"",status:e.status||"active",schedule:e.schedule||{monday:"Off",tuesday:"Off",wednesday:"Off",thursday:"Off",friday:"Off",saturday:"Off",sunday:"Off"}})))}catch(t){console.error("Error fetching employees:",t)}}return(t,e)=>{const y=R("tooltip");return g(),k("div",null,[s("div",Y,[e[11]||(e[11]=s("div",null,[s("h1",{class:"text-2xl font-bold text-gray-900"},"Employees"),s("p",{class:"text-gray-600 mt-1"},"Manage your team members and their schedules")],-1)),o(a(m),{label:"Add Employee",icon:"pi pi-plus",class:"mt-4 sm:mt-0",onClick:S})]),o(a(A),{class:"mb-6 shadow-sm"},{content:u(()=>[o(a(K),null,{default:u(()=>[o(a(W),{class:"pi pi-search"}),o(a(b),{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=l=>w.value=l),placeholder:"Search employees...",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),o(a(A),{class:"shadow-sm"},{content:u(()=>[o(a(X),{value:P.value,loading:V.value,paginator:"",rows:10,rowsPerPageOptions:[5,10,20],responsiveLayout:"scroll",class:"p-datatable-sm"},{empty:u(()=>[...e[12]||(e[12]=[s("div",{class:"text-center py-8 text-white-500"}," No employees found ",-1)])]),default:u(()=>[o(a(h),{field:"firstName",header:"Name",sortable:""},{body:u(({data:l})=>[s("div",Z,[s("div",ee,[s("span",le,r(l.firstName.charAt(0))+r(l.lastName.charAt(0)),1)]),s("div",null,[s("p",te,r(l.firstName)+" "+r(l.lastName),1),s("p",se,r(l.email),1)])])]),_:1}),o(a(h),{field:"phone",header:"Phone",sortable:""}),o(a(h),{field:"role",header:"Role",sortable:""},{body:u(({data:l})=>[s("span",ae,r(l.role),1)]),_:1}),o(a(h),{field:"status",header:"Status",sortable:""},{body:u(({data:l})=>[s("span",{class:M(["px-2 py-1 rounded-full text-xs font-medium",l.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])},r(l.status==="active"?"Active":"Inactive"),3)]),_:1}),o(a(h),{header:"Actions",exportable:!1,style:{"min-width":"12rem"}},{body:u(({data:l})=>[s("div",oe,[C(o(a(m),{icon:"pi pi-calendar",text:"",size:"small",severity:"secondary",onClick:c=>U(l)},null,8,["onClick"]),[[y,"View Schedule",void 0,{top:!0}]]),C(o(a(m),{icon:"pi pi-pencil",text:"",size:"small",severity:"secondary",onClick:c=>$(l)},null,8,["onClick"]),[[y,"Edit",void 0,{top:!0}]]),C(o(a(m),{icon:l.status==="active"?"pi pi-ban":"pi pi-check",text:"",size:"small",severity:l.status==="active"?"warn":"success",onClick:c=>z(l)},null,8,["icon","severity","onClick"]),[[y,l.status==="active"?"Deactivate":"Activate",void 0,{top:!0}]]),C(o(a(m),{icon:"pi pi-trash",text:"",size:"small",severity:"danger",onClick:c=>L(l)},null,8,["onClick"]),[[y,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading"])]),_:1}),o(a(O),{visible:p.value,"onUpdate:visible":e[7]||(e[7]=l=>p.value=l),header:x.value?"Edit Employee":"Add Employee",modal:!0,style:{width:"500px"}},{footer:u(()=>[o(a(m),{label:"Cancel",text:"",severity:"secondary",onClick:e[6]||(e[6]=l=>p.value=!1)}),o(a(m),{label:x.value?"Update":"Create",onClick:_},null,8,["label"])]),default:u(()=>[f.value?(g(),T(a(G),{key:0,severity:"error",class:"mb-4"},{default:u(()=>[Q(r(f.value),1)]),_:1})):D("",!0),s("div",ie,[s("div",ue,[s("div",null,[e[13]||(e[13]=s("label",{class:"block text-sm font-medium text-white-700 mb-1"},"First Name *",-1)),o(a(b),{modelValue:i.value.firstName,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value.firstName=l),class:"w-full"},null,8,["modelValue"])]),s("div",null,[e[14]||(e[14]=s("label",{class:"block text-sm font-medium text-white-700 mb-1"},"Last Name *",-1)),o(a(b),{modelValue:i.value.lastName,"onUpdate:modelValue":e[2]||(e[2]=l=>i.value.lastName=l),class:"w-full"},null,8,["modelValue"])])]),s("div",null,[e[15]||(e[15]=s("label",{class:"block text-sm font-medium text-white-700 mb-1"},"Email *",-1)),o(a(b),{modelValue:i.value.email,"onUpdate:modelValue":e[3]||(e[3]=l=>i.value.email=l),type:"email",class:"w-full"},null,8,["modelValue"])]),s("div",null,[e[16]||(e[16]=s("label",{class:"block text-sm font-medium text-white-700 mb-1"},"Phone",-1)),o(a(b),{modelValue:i.value.phone,"onUpdate:modelValue":e[4]||(e[4]=l=>i.value.phone=l),class:"w-full"},null,8,["modelValue"])]),s("div",null,[e[17]||(e[17]=s("label",{class:"block text-sm font-medium text-white-700 mb-1"},"Role",-1)),o(a(b),{modelValue:i.value.role,"onUpdate:modelValue":e[5]||(e[5]=l=>i.value.role=l),class:"w-full",placeholder:"e.g., Stylist, Barber"},null,8,["modelValue"])])])]),_:1},8,["visible","header"]),o(a(O),{visible:N.value,"onUpdate:visible":e[10]||(e[10]=l=>N.value=l),header:`Schedule - ${v.value?.firstName} ${v.value?.lastName}`,modal:!0,style:{width:"500px"}},{footer:u(()=>[o(a(m),{label:"Close",text:"",onClick:e[8]||(e[8]=l=>N.value=!1)}),o(a(m),{label:"Edit Schedule",icon:"pi pi-pencil",onClick:e[9]||(e[9]=l=>$(v.value))})]),default:u(()=>[v.value?(g(),k("div",ne,[(g(!0),k(H,null,J(v.value.schedule,(l,c)=>(g(),k("div",{key:c,class:"flex justify-between items-center py-2 border-b border-gray-100 last:border-0"},[s("span",re,r(c),1),s("span",{class:M(v.value.schedule[c]==="Off"?"text-gray-400":"text-gray-900")},r(v.value.schedule[c]),3)]))),128))])):D("",!0)]),_:1},8,["visible","header"])])}}});export{be as default};
