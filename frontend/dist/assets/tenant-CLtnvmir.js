import{a$ as E,i as r,E as i,z as c}from"./index-DY5TFfB9.js";const x=E("tenant",()=>{const n=r(null),o=r([]),u=r(null),s=r(!1),a=r(null),v=i(()=>!!n.value),d=i(()=>n.value?.id||null),p=i(()=>n.value?.name||""),g=i(()=>n.value?.status==="active");async function y(){s.value=!0,a.value=null;try{const e=(await c.get("/api/tenant")).data?.data?.tenant;if(!e)throw new Error("Invalid response structure");n.value=e,o.value=[e]}catch(t){if(t&&typeof t=="object"&&"response"in t){const e=t;a.value=e.response?.data?.message||"Failed to fetch tenant"}else a.value="Failed to fetch tenant"}finally{s.value=!1}}async function h(t){s.value=!0,a.value=null;try{const e=o.value.find(l=>l.id===t);return e?(n.value=e,await f(),!0):(a.value="Tenant not found",!1)}catch(e){if(e&&typeof e=="object"&&"response"in e){const l=e;a.value=l.response?.data?.message||"Failed to select tenant"}else a.value="Failed to select tenant";return!1}finally{s.value=!1}}async function f(){if(n.value)try{const t=await c.get("/api/tenant/settings");u.value=t.data.settings}catch(t){if(t&&typeof t=="object"&&"response"in t){const e=t;a.value=e.response?.data?.message||"Failed to fetch settings"}else a.value="Failed to fetch settings"}}async function m(t){if(!n.value)return!1;s.value=!0,a.value=null;try{const e=await c.patch("/api/tenant/settings",t);return u.value=e.data.settings,!0}catch(e){if(e&&typeof e=="object"&&"response"in e){const l=e;a.value=l.response?.data?.message||"Failed to update settings"}else a.value="Failed to update settings";return!1}finally{s.value=!1}}function F(){n.value=null,u.value=null,o.value=[]}function T(){a.value=null}return{currentTenant:n,tenants:o,settings:u,loading:s,error:a,hasTenant:v,tenantId:d,tenantName:p,isActiveTenant:g,fetchTenants:y,selectTenant:h,fetchSettings:f,updateSettings:m,clearTenant:F,clearError:T}});export{x as u};
