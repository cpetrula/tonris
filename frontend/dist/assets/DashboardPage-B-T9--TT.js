import{d as B,h as F,i as p,E as R,j as G,c as r,a as e,l as b,t as n,u as d,F as h,r as _,e as f,k as S,w as c,s as v,z as H,o as l,n as $,g as T,f as O,x as P}from"./index-DGgEdFeZ.js";import{u as L}from"./tenant-CL3JUEIn.js";const U={class:"mb-8"},J={class:"text-2xl font-bold text-gray-900"},Q={class:"text-gray-600 mt-1"},Y={key:0,class:"mb-6 p-4 bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-700 rounded-lg"},q={class:"text-red-800 dark:text-red-300"},I={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},K={class:"flex items-center"},W={class:"ml-4"},X={class:"text-sm font-medium text-gray-600"},Z={class:"text-2xl font-bold text-gray-900"},tt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},et={class:"flex items-center justify-between"},st={class:"space-y-4"},ot={class:"font-medium text-gray-900"},nt={class:"text-sm text-gray-600"},at={class:"text-right"},lt={class:"text-sm font-medium text-violet-600"},it={key:0,class:"text-center py-8 text-gray-600"},rt={class:"flex items-center justify-between"},dt={class:"space-y-4"},ct={class:"ml-3"},ut={class:"text-sm font-medium text-gray-900"},pt={class:"text-sm text-gray-600"},mt={class:"text-xs text-gray-500 mt-1"},gt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},yt=B({__name:"DashboardPage",setup(ft){const D=F(),N=L(),w=P(),k=p(!1),m=p(null),E=R(()=>{const o=new Date().getHours();return o<12?"Good morning":o<18?"Good afternoon":"Good evening"}),A=p([{label:"Today's Appointments",value:"0",icon:"pi pi-calendar",color:"bg-blue-500"},{label:"Pending Calls",value:"0",icon:"pi pi-phone",color:"bg-orange-500"},{label:"Active Employees",value:"0",icon:"pi pi-users",color:"bg-green-500"},{label:"Services Offered",value:"0",icon:"pi pi-list",color:"bg-purple-500"}]),x=p([]),y=p([]);function u(o){w.push(o)}function M(o){const t=["/app/appointments","/app/appointments","/app/employees","/app/services"];t[o]&&w.push(t[o])}function V(o){return new Date(o).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function j(o){const t=new Date,s=new Date(o),i=t.getTime()-s.getTime(),a=Math.floor(i/6e4),g=Math.floor(a/60),C=Math.floor(g/24);return a<1?"Just now":a<60?`${a} minute${a===1?"":"s"} ago`:g<24?`${g} hour${g===1?"":"s"} ago`:C===1?"Yesterday":`${C} days ago`}async function z(){k.value=!0,m.value=null;try{const t=(await H.get("/api/tenant/dashboard-stats")).data.data;if(t.stats){const s={"Today's Appointments":"todayAppointments","Pending Calls":"pendingCalls","Active Employees":"activeEmployees","Services Offered":"servicesOffered"};A.value.forEach(i=>{const a=s[i.label];a&&t.stats[a]!==void 0&&(i.value=String(t.stats[a]))})}t.todayAppointments&&(x.value=t.todayAppointments.map(s=>({...s,time:V(s.time)}))),t.recentActivity&&(y.value=t.recentActivity.map(s=>({...s,time:j(s.timestamp)})))}catch(o){console.error("Failed to fetch dashboard data:",o),m.value="Failed to load dashboard data"}finally{k.value=!1}}return G(async()=>{await z()}),(o,t)=>(l(),r("div",null,[e("div",U,[e("h1",J,n(E.value)+", "+n(d(D).user?.firstName||"User")+"! ",1),e("p",Q," Here's what's happening with "+n(d(N).tenantName||"your business")+" today. ",1)]),m.value?(l(),r("div",Y,[e("p",q,n(m.value),1)])):b("",!0),e("div",I,[(l(!0),r(h,null,_(A.value,(s,i)=>(l(),S(d(v),{key:s.label,class:"shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:a=>M(i)},{content:c(()=>[e("div",K,[e("div",{class:$([s.color,"w-12 h-12 rounded-lg flex items-center justify-center"])},[e("i",{class:$([s.icon,"text-xl text-white"])},null,2)],2),e("div",W,[e("p",X,n(s.label),1),e("p",Z,n(s.value),1)])])]),_:2},1032,["onClick"]))),128))]),e("div",tt,[f(d(v),{class:"shadow-sm"},{title:c(()=>[e("div",et,[t[6]||(t[6]=e("span",null,"Today's Appointments",-1)),f(d(T),{label:"View All",text:"",size:"small",onClick:t[0]||(t[0]=s=>u("/app/appointments"))})])]),content:c(()=>[e("div",st,[(l(!0),r(h,null,_(x.value,s=>(l(),r("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("p",ot,n(s.customerName),1),e("p",nt,n(s.service)+" with "+n(s.employee),1)]),e("div",at,[e("p",lt,n(s.time),1)])]))),128)),x.value.length===0?(l(),r("div",it," No appointments scheduled for today ")):b("",!0)])]),_:1}),y.value.length>0?(l(),S(d(v),{key:0,class:"shadow-sm"},{title:c(()=>[e("div",rt,[t[7]||(t[7]=e("span",null,"Recent Activity",-1)),f(d(T),{label:"View Reports",text:"",size:"small",onClick:t[1]||(t[1]=s=>u("/app/reports"))})])]),content:c(()=>[e("div",dt,[(l(!0),r(h,null,_(y.value,(s,i)=>(l(),r("div",{key:i,class:"flex items-start pb-4 border-b border-gray-200 last:border-0 last:pb-0"},[t[8]||(t[8]=e("div",{class:"w-2 h-2 mt-2 rounded-full bg-violet-500"},null,-1)),e("div",ct,[e("p",ut,n(s.action),1),e("p",pt,n(s.item),1),e("p",mt,n(s.time),1)])]))),128))])]),_:1})):b("",!0),f(d(v),{class:"shadow-sm lg:col-span-2"},{title:c(()=>[...t[9]||(t[9]=[O("Quick Actions",-1)])]),content:c(()=>[e("div",gt,[e("button",{class:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors text-left",onClick:t[2]||(t[2]=s=>u("/app/appointments"))},[...t[10]||(t[10]=[e("i",{class:"pi pi-calendar-plus text-2xl text-violet-600 mb-2 block"},null,-1),e("span",{class:"text-sm font-medium text-gray-900"},"New Appointment",-1)])]),e("button",{class:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors text-left",onClick:t[3]||(t[3]=s=>u("/app/employees"))},[...t[11]||(t[11]=[e("i",{class:"pi pi-user-plus text-2xl text-cyan-600 mb-2 block"},null,-1),e("span",{class:"text-sm font-medium text-gray-900"},"Add Employee",-1)])]),e("button",{class:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors text-left",onClick:t[4]||(t[4]=s=>u("/app/services"))},[...t[12]||(t[12]=[e("i",{class:"pi pi-plus-circle text-2xl text-fuchsia-600 mb-2 block"},null,-1),e("span",{class:"text-sm font-medium text-gray-900"},"Add Service",-1)])]),e("button",{class:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors text-left",onClick:t[5]||(t[5]=s=>u("/app/settings"))},[...t[13]||(t[13]=[e("i",{class:"pi pi-cog text-2xl text-gray-600 mb-2 block"},null,-1),e("span",{class:"text-sm font-medium text-gray-900"},"Settings",-1)])])])]),_:1})])]))}});export{yt as default};
