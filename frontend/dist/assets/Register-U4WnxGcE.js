import{d as h,h as P,i as a,j as S,c as q,a as s,k as B,l as C,u as l,w as g,m as U,p as E,b as R,e as o,q as b,f as m,v as w,g as $,R as A,z as F,o as V,t as I,x as L}from"./index-BrL85Hb2.js";import{s as j}from"./index-CGaMxkLK.js";import"./index-D1VdLHRo.js";const D={class:"min-h-[calc(100vh-10rem)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},M={class:"w-full max-w-md"},z={class:"bg-white rounded-xl shadow-lg p-8"},J={class:"grid grid-cols-2 gap-4"},G={class:"mt-6 text-center text-sm text-gray-600"},W=h({__name:"Register",setup(H){const k=L(),u=P(),p=a(""),c=a(""),f=a(""),i=a(""),v=a(""),d=a(""),x=a([]),r=a(""),y=a(!1);async function N(){y.value=!0;try{const n=await F.get("/api/business-types/active");x.value=n.data.data.businessTypes}catch(n){console.error("Failed to fetch business types:",n),r.value="Failed to load business types. Please refresh the page."}finally{y.value=!1}}async function T(){if(r.value="",!d.value){r.value="Please select a business type";return}if(i.value!==v.value){r.value="Passwords do not match";return}if(i.value.length<8){r.value="Password must be at least 8 characters";return}await u.register({firstName:p.value,lastName:c.value,email:f.value,password:i.value,businessTypeId:d.value})&&k.push("/app")}return S(()=>{u.clearError(),N()}),(n,e)=>(V(),q("div",D,[s("div",M,[s("div",z,[e[15]||(e[15]=s("div",{class:"text-center mb-8"},[s("h1",{class:"text-3xl font-bold text-gray-900"},"Create your account"),s("p",{class:"text-gray-600 mt-2"},"Start your free trial today")],-1)),l(u).error||r.value?(V(),B(l(U),{key:0,severity:"error",class:"mb-4"},{default:g(()=>[m(I(l(u).error||r.value),1)]),_:1})):C("",!0),s("form",{onSubmit:E(T,["prevent"]),class:"space-y-5"},[s("div",J,[s("div",null,[e[6]||(e[6]=s("label",{for:"firstName",class:"block text-sm font-medium text-gray-700 mb-1"}," First name ",-1)),o(l(b),{id:"firstName",modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),placeholder:"John",class:"w-full",required:"",autocomplete:"given-name"},null,8,["modelValue"])]),s("div",null,[e[7]||(e[7]=s("label",{for:"lastName",class:"block text-sm font-medium text-gray-700 mb-1"}," Last name ",-1)),o(l(b),{id:"lastName",modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),placeholder:"Doe",class:"w-full",required:"",autocomplete:"family-name"},null,8,["modelValue"])])]),s("div",null,[e[8]||(e[8]=s("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"}," Email address ",-1)),o(l(b),{id:"email",modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),type:"email",placeholder:"you@example.com",class:"w-full",required:"",autocomplete:"email"},null,8,["modelValue"])]),s("div",null,[e[9]||(e[9]=s("label",{for:"businessType",class:"block text-sm font-medium text-gray-700 mb-1"},[m(" Business Type "),s("span",{class:"text-red-500"},"*")],-1)),o(l(j),{id:"businessType",modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=t=>d.value=t),options:x.value,optionLabel:"businessType",optionValue:"id",placeholder:"Select a business type",class:"w-full",loading:y.value},null,8,["modelValue","options","loading"])]),s("div",null,[e[10]||(e[10]=s("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"}," Password ",-1)),o(l(w),{id:"password",modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=t=>i.value=t),placeholder:"••••••••",class:"w-full","toggle-mask":"",required:"",autocomplete:"new-password"},null,8,["modelValue"])]),s("div",null,[e[11]||(e[11]=s("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-1"}," Confirm password ",-1)),o(l(w),{id:"confirmPassword",modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=t=>v.value=t),placeholder:"••••••••",class:"w-full",feedback:!1,"toggle-mask":"",required:"",autocomplete:"new-password"},null,8,["modelValue"])]),e[12]||(e[12]=R('<div class="flex items-center"><input id="terms" type="checkbox" class="h-4 w-4 text-violet-600 border-gray-300 rounded focus:ring-violet-500" required><label for="terms" class="ml-2 text-sm text-gray-600"> I agree to the <a href="#" class="text-violet-600 hover:text-violet-500">Terms of Service</a> and <a href="#" class="text-violet-600 hover:text-violet-500">Privacy Policy</a></label></div>',1)),o(l($),{type:"submit",label:"Create Account",icon:"pi pi-user-plus",class:"w-full",loading:l(u).loading},null,8,["loading"])],32),s("p",G,[e[14]||(e[14]=m(" Already have an account? ",-1)),o(l(A),{to:"/login",class:"text-violet-600 hover:text-violet-500 font-medium"},{default:g(()=>[...e[13]||(e[13]=[m(" Sign in ",-1)])]),_:1})])])])]))}});export{W as default};
