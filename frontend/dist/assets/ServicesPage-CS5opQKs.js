import{d as M,i as v,E as _,j as q,z as j,c as F,a as t,e as o,u as a,g as p,w as r,s as x,o as h,t as u,q as w,f as k,n as H,I as S,S as T,k as G,l as O,m as Q}from"./index-D7omodB6.js";import{s as J,a as f,b as $}from"./index-05FdWeQ1.js";import{s as K}from"./index-Cw-Wvh8s.js";import{s as R}from"./index-DRWJ3EJG.js";import"./index-7ibFymrG.js";import"./index-BIlrXjJS.js";import"./index-CflXi0fR.js";const W={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},X={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6"},Y={class:"text-center"},Z={class:"text-3xl font-bold text-violet-600"},ee={class:"text-center"},te={class:"text-3xl font-bold text-green-600"},se={class:"text-center"},le={class:"text-3xl font-bold text-cyan-600"},ae={class:"flex flex-col sm:flex-row gap-4"},oe={class:"flex-1"},ie={class:"p-input-icon-left w-full"},re={class:"font-medium text-gray-900"},ne={class:"text-sm text-gray-500 line-clamp-1"},ue={class:"px-2 py-1 bg-gray-100 rounded-full text-sm text-gray-700"},de={class:"text-gray-700"},ce={class:"font-medium text-gray-900"},ve={class:"flex gap-2"},me={class:"space-y-4"},pe={class:"grid grid-cols-2 gap-4"},Ve=M({__name:"ServicesPage",setup(fe){const b=v(!1),n=v([]),y=v(""),m=v(!1),g=v(!1),c=v(""),C={id:"",name:"",description:"",duration:30,price:0,category:"",status:"active"},i=v({...C}),D=_(()=>{if(!y.value)return n.value;const l=y.value.toLowerCase();return n.value.filter(e=>e.name.toLowerCase().includes(l)||e.description.toLowerCase().includes(l)||e.category.toLowerCase().includes(l))}),U=_(()=>{const l=new Set(n.value.map(e=>e.category));return Array.from(l)});function A(l){if(l<60)return`${l} min`;const e=Math.floor(l/60),d=l%60;return d>0?`${e}h ${d}m`:`${e}h`}function E(l){return`$${l.toFixed(2)}`}function P(){i.value={...C,id:crypto.randomUUID()},g.value=!1,m.value=!0,c.value=""}function N(l){i.value={...l},g.value=!0,m.value=!0,c.value=""}function z(){if(!i.value.name||!i.value.price){c.value="Please fill in all required fields";return}if(g.value){const l=n.value.findIndex(e=>e.id===i.value.id);l!==-1&&(n.value[l]={...i.value})}else n.value.push({...i.value});m.value=!1,c.value=""}function I(l){confirm(`Are you sure you want to delete "${l.name}"?`)&&(n.value=n.value.filter(e=>e.id!==l.id))}function L(l){const e=n.value.findIndex(d=>d.id===l.id);e!==-1&&(n.value[e].status=l.status==="active"?"inactive":"active")}q(async()=>{b.value=!0;try{await B()}catch(l){console.error("Error loading services:",l),c.value="Failed to load services data"}finally{b.value=!1}});async function B(){try{const l=await j.get("/api/services");l.data.success&&l.data.data&&l.data.data.services&&(n.value=l.data.data.services.map(e=>({id:e.id,name:e.name||"",description:e.description||"",duration:e.duration||30,price:e.price||0,category:e.category||"",status:e.status||"active"})))}catch(l){console.error("Error fetching services:",l)}}return(l,e)=>{const d=T("tooltip");return h(),F("div",null,[t("div",W,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Services"),t("p",{class:"text-gray-600 mt-1"},"Manage your service offerings and pricing")],-1)),o(a(p),{label:"Add Service",icon:"pi pi-plus",class:"mt-4 sm:mt-0",onClick:P})]),t("div",X,[o(a(x),{class:"shadow-sm"},{content:r(()=>[t("div",Y,[t("p",Z,u(n.value.length),1),e[9]||(e[9]=t("p",{class:"text-sm text-gray-500"},"Total Services",-1))])]),_:1}),o(a(x),{class:"shadow-sm"},{content:r(()=>[t("div",ee,[t("p",te,u(n.value.filter(s=>s.status==="active").length),1),e[10]||(e[10]=t("p",{class:"text-sm text-gray-500"},"Active Services",-1))])]),_:1}),o(a(x),{class:"shadow-sm"},{content:r(()=>[t("div",se,[t("p",le,u(U.value.length),1),e[11]||(e[11]=t("p",{class:"text-sm text-gray-500"},"Categories",-1))])]),_:1})]),o(a(x),{class:"mb-6 shadow-sm"},{content:r(()=>[t("div",ae,[t("div",oe,[t("span",ie,[e[12]||(e[12]=t("i",{class:"pi pi-search"},null,-1)),o(a(w),{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=s=>y.value=s),placeholder:"Search services...",class:"w-full"},null,8,["modelValue"])])])])]),_:1}),o(a(x),{class:"shadow-sm"},{content:r(()=>[o(a(J),{value:D.value,loading:b.value,paginator:"",rows:10,rowsPerPageOptions:[5,10,20],responsiveLayout:"scroll",class:"p-datatable-sm"},{empty:r(()=>[...e[13]||(e[13]=[t("div",{class:"text-center py-8 text-gray-500"}," No services found ",-1)])]),default:r(()=>[o(a(f),{field:"name",header:"Service",sortable:""},{body:r(({data:s})=>[t("div",null,[t("p",re,u(s.name),1),t("p",ne,u(s.description),1)])]),_:1}),o(a(f),{field:"category",header:"Category",sortable:""},{body:r(({data:s})=>[t("span",ue,u(s.category),1)]),_:1}),o(a(f),{field:"duration",header:"Duration",sortable:""},{body:r(({data:s})=>[t("span",de,[e[14]||(e[14]=t("i",{class:"pi pi-clock mr-1 text-gray-400"},null,-1)),k(" "+u(A(s.duration)),1)])]),_:1}),o(a(f),{field:"price",header:"Price",sortable:""},{body:r(({data:s})=>[t("span",ce,u(E(s.price)),1)]),_:1}),o(a(f),{field:"status",header:"Status",sortable:""},{body:r(({data:s})=>[t("span",{class:H(["px-2 py-1 rounded-full text-xs font-medium",s.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])},u(s.status==="active"?"Active":"Inactive"),3)]),_:1}),o(a(f),{header:"Actions",exportable:!1,style:{"min-width":"10rem"}},{body:r(({data:s})=>[t("div",ve,[S(o(a(p),{icon:"pi pi-pencil",text:"",size:"small",severity:"secondary",onClick:V=>N(s)},null,8,["onClick"]),[[d,"Edit",void 0,{top:!0}]]),S(o(a(p),{icon:s.status==="active"?"pi pi-ban":"pi pi-check",text:"",size:"small",severity:s.status==="active"?"warn":"success",onClick:V=>L(s)},null,8,["icon","severity","onClick"]),[[d,s.status==="active"?"Deactivate":"Activate",void 0,{top:!0}]]),S(o(a(p),{icon:"pi pi-trash",text:"",size:"small",severity:"danger",onClick:V=>I(s)},null,8,["onClick"]),[[d,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading"])]),_:1}),o(a(R),{visible:m.value,"onUpdate:visible":e[7]||(e[7]=s=>m.value=s),header:g.value?"Edit Service":"Add Service",modal:!0,style:{width:"500px"}},{footer:r(()=>[o(a(p),{label:"Cancel",text:"",severity:"secondary",onClick:e[6]||(e[6]=s=>m.value=!1)}),o(a(p),{label:g.value?"Update":"Create",onClick:z},null,8,["label"])]),default:r(()=>[c.value?(h(),G(a(Q),{key:0,severity:"error",class:"mb-4"},{default:r(()=>[k(u(c.value),1)]),_:1})):O("",!0),t("div",me,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Service Name *",-1)),o(a(w),{modelValue:i.value.name,"onUpdate:modelValue":e[1]||(e[1]=s=>i.value.name=s),class:"w-full",placeholder:"e.g., Haircut"},null,8,["modelValue"])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),o(a(K),{modelValue:i.value.description,"onUpdate:modelValue":e[2]||(e[2]=s=>i.value.description=s),class:"w-full",rows:"3",placeholder:"Describe the service..."},null,8,["modelValue"])]),t("div",pe,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Duration (minutes) *",-1)),o(a($),{modelValue:i.value.duration,"onUpdate:modelValue":e[3]||(e[3]=s=>i.value.duration=s),class:"w-full",min:5,step:5,suffix:" min"},null,8,["modelValue"])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Price *",-1)),o(a($),{modelValue:i.value.price,"onUpdate:modelValue":e[4]||(e[4]=s=>i.value.price=s),class:"w-full",mode:"currency",currency:"USD",locale:"en-US"},null,8,["modelValue"])])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),o(a(w),{modelValue:i.value.category,"onUpdate:modelValue":e[5]||(e[5]=s=>i.value.category=s),class:"w-full",placeholder:"e.g., Hair, Grooming, Spa"},null,8,["modelValue"])])])]),_:1},8,["visible","header"])])}}});export{Ve as default};
